# Todo Lists 多设备同步任务管理应用

这是一个支持多设备登录和数据同步的任务管理应用，让用户可以在不同设备间无缝同步和管理自己的待办任务。

## 项目特性

- 🔐 **用户认证系统**：支持注册、登录，安全存储用户信息
- 📱 **多设备支持**：自动识别并管理登录设备
- 🔄 **实时数据同步**：多设备间自动同步任务数据
- ⚔️ **冲突解决**：当数据产生冲突时，提供手动解决机制
- 🌐 **离线工作**：支持离线操作，网络恢复后自动同步
- 📊 **任务管理**：支持任务创建、编辑、删除、分类、优先级设置
- 🎨 **现代UI**：简洁美观的用户界面，良好的用户体验

## 技术栈

### 后端
- **语言**：Go
- **数据库**：SQLite
- **认证**：JWT (JSON Web Tokens)
- **密码加密**：bcrypt

### 前端
- **HTML5/CSS3**：页面结构和样式
- **JavaScript**：交互逻辑
- **本地存储**：localStorage (离线数据和认证信息)

## 安装与运行

### 前提条件

- Go 1.18+ 已安装
- SQLite 已安装（项目会自动创建数据库文件）

### 安装步骤

1. **克隆项目**

```bash
git clone <repository-url>
cd TodoLists
```

2. **安装依赖**

```bash
go mod download
```

3. **启动应用**

```bash
go run main.go
```

应用将在 `http://localhost:8080` 启动。

## 使用说明

### 1. 用户注册与登录

- 打开应用首页，点击"注册"标签
- 输入用户名和密码（密码至少6位）
- 点击"注册"按钮，注册成功后会自动登录
- 或者使用已有账户登录

### 2. 任务管理

- **添加任务**：在页面顶部的表单中填写任务名称、描述、截止时间等信息，点击"添加任务"
- **编辑任务**：点击任务卡片上的"编辑"按钮，修改任务信息后点击"保存"
- **完成任务**：点击任务名称前的复选框标记任务完成状态
- **删除任务**：点击任务卡片上的"删除"按钮，确认后删除任务
- **任务排序**：使用顶部的排序下拉菜单，可以按优先级、截止时间或分类排序

### 3. 多设备同步

- 在不同设备上登录同一账户
- 系统会自动识别新设备并进行注册
- 任务数据会自动在设备间同步
- 同步状态指示器会显示当前同步状态

### 4. 冲突处理

当同一任务在不同设备上被修改导致冲突时：
- 系统会弹出冲突解决对话框
- 显示本地版本和服务器版本的差异
- 可以选择保留本地版本或服务器版本

### 5. 设备管理

- 点击右上角的设备图标，可以查看当前登录的所有设备列表
- 系统会标识当前正在使用的设备

## 项目结构

```
TodoLists/
├── README.md          # 项目说明文档
├── data/              # 数据库文件目录
│   └── todolist.db    # SQLite数据库文件（自动创建）
├── db/                # 数据库相关模块
│   ├── auth.go        # 用户认证功能
│   ├── database.go    # 数据库连接和初始化
│   ├── device.go      # 设备管理功能
│   ├── module.go      # 数据库模块定义
│   └── sync.go        # 数据同步功能
├── go.mod             # Go模块定义
├── go.sum             # 依赖版本锁定
├── main.go            # 应用入口
└── static/            # 静态资源
    ├── index.html     # 主页面
    └── js/            # JavaScript模块
        ├── auth.js    # 前端认证模块
        ├── sync.js    # 前端同步模块
        └── todo.js    # 任务管理模块
```

## API 接口

### 认证相关
- `POST /api/register` - 用户注册
- `POST /api/login` - 用户登录
- `GET /api/me` - 获取当前用户信息
- `POST /api/logout` - 用户登出
- `GET /api/devices` - 获取设备列表

### 任务相关
- `GET /api/todos` - 获取任务列表
- `POST /api/todos` - 创建新任务
- `PUT /api/todos/:id` - 更新任务
- `DELETE /api/todos/:id` - 删除任务

### 同步相关
- `POST /api/sync` - 同步数据
- `POST /api/todos/batch` - 批量操作任务
- `POST /api/conflicts/resolve` - 解决数据冲突

## 注意事项

- 默认数据库文件保存在 `data/todolist.db`
- 首次运行时会自动创建数据库表结构
- 认证信息存储在前端localStorage中
- 为了安全，建议在生产环境中配置HTTPS
- 任务数据默认按用户ID和设备ID隔离

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request！